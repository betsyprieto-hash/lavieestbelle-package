<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>La Vie Est Belle Travel - Book Your Package</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState } = React;
        
        function TravelPackageSelector() {
            const [step, setStep] = useState('welcome');
            const [selectedPackage, setSelectedPackage] = useState(null);
            const [numTravelers, setNumTravelers] = useState(2);
            const [numDays, setNumDays] = useState(10);
            const [discountCode, setDiscountCode] = useState('');
            const [appliedDiscount, setAppliedDiscount] = useState(0);
            const [showBookingDetails, setShowBookingDetails] = useState(false);
            const [confirmedEmail, setConfirmedEmail] = useState(false);
            const [clientInfo, setClientInfo] = useState({ firstName: '', lastName: '', email: '' });

            const packages = {
                hotelOnly: { name: "Hotel Only", price: 200, priceDisplay: "$200", priceDetail: "(refunded if hotel is booked within 30 days)", description: "Perfect if you just need help finding and booking the ideal hotel", features: ["Personalized hotel recommendations", "Booking assistance", "Service fee refundable if booked within 30 days"] },
                signatureJourney: { name: "The Signature Journey", basePrice: 600, description: "Our most comprehensive planning experience", features: ["Complete trip planning", "Every detail arranged", "24/7 support"] },
                curatedEscape: { name: "The Curated Escape", basePrice: 500, description: "Personalized planning with your input", features: ["Collaborative planning", "Expert guidance", "Flexibility to customize"] },
                groupTrips: { name: "Group Trips", price: 250, priceDisplay: "$250 deposit", priceDetail: "Rest TBD", description: "Competitive group rates", features: ["Group rates", "Exclusive perks", "Dedicated support"] }
            };

            const calculatePrice = (pkg, travelers, days) => {
                if (pkg === 'signatureJourney') return 600 + Math.max(0, travelers - 2) * 100 + Math.max(0, days - 10) * 100;
                if (pkg === 'curatedEscape') return 500 + Math.max(0, travelers - 2) * 50 + Math.max(0, days - 10) * 100;
                return packages[pkg]?.price || 0;
            };

            const getPriceDisplay = (withDiscount = true) => {
                let price = calculatePrice(selectedPackage, numTravelers, numDays);
                if (selectedPackage === 'hotelOnly') price = 200;
                if (selectedPackage === 'groupTrips') return '$250 deposit';
                if (withDiscount && appliedDiscount > 0) price = appliedDiscount === 50 ? Math.round(price * 0.5) : 0;
                return '$' + price;
            };

            const sendEmail = () => {
                const pkg = packages[selectedPackage];
                emailjs.send('service_3am7ego', 'template_et41uug', {
                    client_name: clientInfo.firstName + ' ' + clientInfo.lastName,
                    client_email: clientInfo.email,
                    package_name: pkg.name,
                    price: getPriceDisplay(true),
                    discount_info: appliedDiscount > 0 ? appliedDiscount + '% off' : '',
                    trip_details: (selectedPackage === 'signatureJourney' || selectedPackage === 'curatedEscape') ? numTravelers + ' travelers, ' + numDays + ' days' : '',
                    features: pkg.features.join(', '),
                    date: new Date().toLocaleDateString(),
                    payment_method: 'Venmo @betsy-prieto or PayPal',
                    form_link: 'https://traveljoy.com/webforms/bZVyw6QqTt6J4vAiSHHXTfEg/forms/TPUBHszwEQuZkeomHrUF6mXf/link'
                });
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 p-4">
                    <div className="max-w-2xl mx-auto bg-white rounded-xl shadow-lg p-8">
                        <div className="text-center mb-8">
                            <h1 className="text-5xl font-bold mb-2" style={{color: '#1e40af'}}>La Vie Est Belle</h1>
                            <p className="text-2xl mb-3" style={{color: '#2563eb', letterSpacing: '0.3em'}}>TRAVEL</p>
                        </div>
                        
                        {step === 'welcome' && (
                            <div className="space-y-4 max-w-md mx-auto">
                                <p className="text-xl text-center mb-4">Let's find your perfect package</p>
                                <input type="text" placeholder="First Name *" value={clientInfo.firstName} onChange={(e) => setClientInfo({...clientInfo, firstName: e.target.value})} className="w-full px-4 py-2 border rounded-lg"/>
                                <input type="text" placeholder="Last Name *" value={clientInfo.lastName} onChange={(e) => setClientInfo({...clientInfo, lastName: e.target.value})} className="w-full px-4 py-2 border rounded-lg"/>
                                <input type="email" placeholder="Email *" value={clientInfo.email} onChange={(e) => setClientInfo({...clientInfo, email: e.target.value})} className="w-full px-4 py-2 border rounded-lg"/>
                                <button onClick={() => clientInfo.firstName && clientInfo.lastName && clientInfo.email && setStep('select')} disabled={!clientInfo.firstName || !clientInfo.lastName || !clientInfo.email} className="w-full bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-700 disabled:bg-gray-300">Get Started</button>
                            </div>
                        )}

                        {step === 'select' && (
                            <div>
                                <h2 className="text-2xl font-bold mb-6">Choose Your Package</h2>
                                {Object.keys(packages).map(key => (
                                    <button key={key} onClick={() => { setSelectedPackage(key); sendEmail(); setShowBookingDetails(true); setStep('payment'); }} className="w-full bg-white border-2 border-blue-200 p-6 rounded-lg mb-4 text-left hover:border-blue-600">
                                        <div className="font-bold text-lg text-blue-600">{packages[key].name}</div>
                                        <div className="text-gray-600">{packages[key].description}</div>
                                    </button>
                                ))}
                            </div>
                        )}

                        {step === 'payment' && showBookingDetails && (
                            <div className="space-y-4">
                                <h2 className="text-2xl font-bold">Booking Details</h2>
                                <div className="bg-yellow-50 border-2 border-yellow-400 p-4 rounded-lg">
                                    <p className="font-bold mb-2">Copy and email to: betsy.prieto@fora.travel</p>
                                    <textarea readOnly value={'Booking: ' + clientInfo.firstName + ' ' + clientInfo.lastName + ' | ' + clientInfo.email + ' | Package: ' + packages[selectedPackage].name + ' | Price: ' + getPriceDisplay()} className="w-full h-32 p-3 border rounded text-sm" onClick={(e) => e.target.select()}/>
                                    <label className="flex items-center gap-2 mt-3">
                                        <input type="checkbox" checked={confirmedEmail} onChange={(e) => setConfirmedEmail(e.target.checked)} className="w-5 h-5"/>
                                        <span className="font-semibold">I will email the booking details</span>
                                    </label>
                                </div>
                                <div className="grid grid-cols-2 gap-4">
                                    <button onClick={() => confirmedEmail && window.open('https://venmo.com/betsy-prieto', '_blank')} disabled={!confirmedEmail} className="bg-blue-600 text-white px-6 py-4 rounded-lg font-semibold hover:bg-blue-700 disabled:bg-gray-300">Pay with Venmo</button>
                                    <button onClick={() => confirmedEmail && window.open('https://www.paypal.com/paypalme/betsymariephoto', '_blank')} disabled={!confirmedEmail} className="bg-blue-600 text-white px-6 py-4 rounded-lg font-semibold hover:bg-blue-700 disabled:bg-gray-300" style={{backgroundColor: confirmedEmail ? '#0070ba' : '#d1d5db'}}>Pay with PayPal</button>
                                </div>
                            </div>
                        )}
                        
                        <p className="text-center mt-8 text-sm text-gray-500">betsy.prieto@fora.travel</p>
                    </div>
                </div>
            );
        }

        emailjs.init('GzaeGlwUaVHnVomFt');
        ReactDOM.render(<TravelPackageSelector />, document.getElementById('root'));
    </script>
</body>
</html>
